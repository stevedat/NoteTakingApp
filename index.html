<!DOCTYPE html>
<html>
<head>
  <title>Simple Note Taker</title>
  <style>
    body {
      font-family: sans-serif;
    }
    #new-note {
      width: 100%;
      height: 100px;
      box-sizing: border-box;
      padding: 10px;
      margin-bottom: 10px;
    }
    #notes-list {
      list-style: none;
      padding: 0;
    }
    .note {
      border: 1px solid #ccc;
      padding: 10px;
      margin-bottom: 10px;
      position: relative;
    }
    .delete-button {
        position: absolute;
        top: 10px;
        right: 10px;
        cursor: pointer;
    }
  </style>
</head>
<body>

  <h1>My Notes</h1>

  <textarea id="new-note" placeholder="Enter your note here..."></textarea>
  <button id="save-button">Save Note</button>

  <ul id="notes-list"></ul>

  <script>
    const newNoteInput = document.getElementById('new-note');
    const saveButton = document.getElementById('save-button');
    const notesList = document.getElementById('notes-list');

    // Load notes from local storage
      function loadNotes() {
        const savedNotes = localStorage.getItem('notes');

    if (savedNotes) {
        const notesArray = JSON.parse(savedNotes);
        notesArray.forEach(noteText => {
        addNoteToList(noteText)
        });
    }
    }


    function saveNote() {
          const noteText = newNoteInput.value.trim();

      if (noteText !== "") {

          addNoteToList(noteText); // Add to the UI immediately


          // Save to local storage
          const savedNotes = localStorage.getItem('notes') || '[]'; // Get existing notes or an empty array
          const notesArray = JSON.parse(savedNotes); //parse string to array
          notesArray.push(noteText); // Push new note
          localStorage.setItem('notes', JSON.stringify(notesArray)); //save to local storage


          newNoteInput.value = '';
        }
    }


    function addNoteToList(noteText) {
        const newNoteItem = document.createElement('li');
        newNoteItem.classList.add('note');
        newNoteItem.textContent = noteText;


          // Add delete button
          const deleteButton = document.createElement('span');
          deleteButton.textContent = 'X'; // or use an "X" symbol
          deleteButton.classList.add('delete-button');
          deleteButton.addEventListener('click', () => {
              deleteNote(newNoteItem, noteText);

          });
        newNoteItem.appendChild(deleteButton);    

        notesList.appendChild(newNoteItem);
    }

    function deleteNote(noteItem, noteText) {
        notesList.removeChild(noteItem);  // Remove from UI

        // Remove from local storage
        const savedNotes = localStorage.getItem('notes') ;
        const notesArray = JSON.parse(savedNotes);

        const index = notesArray.indexOf(noteText);

        if(index > -1){
          notesArray.splice(index, 1)
        }


        localStorage.setItem('notes', JSON.stringify(notesArray))
    }

    saveButton.addEventListener('click', saveNote);

    // Load initial notes on page load
    loadNotes();

  </script>

</body>
</html>
