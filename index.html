<!DOCTYPE html>
<html>
<head>
<title>Simple Note App</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/emoji-picker-element@latest/index.css">

    <style>
        /* ... (Previous CSS styles remain the same) ...*/
    </style>
</head>
<body>

    </div>
    <div id="new-note">
        <textarea placeholder="New Note..."></textarea>
        <button id="emoji-button">ðŸ˜€</button>

        <div id="note-actions">
            <button id="add-note">Add</button>
            <button id="preview-button">Preview</button>
            <button id="download-button">Download PDF</button>
        </div>
        <div id="preview-area" style="display:none;"></div>

        <div id="hashtags"></div>

    </div>



</div>



<script src="https://cdn.jsdelivr.net/npm/emoji-picker-element@1/index.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"
        integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbmjtWHjQBzRdqtPd3ogBlegHnAI2uPkcVvAHU2KdVpRwtBhsw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script>
// ... (Previous JavaScript code for note taking logic remains the same) ...



    const emojiButton = document.getElementById('emoji-button');

        //Emoji Picker function

    function toggleEmojiPicker() {

        const emojiPicker = document.getElementById('emoji-picker');

        if (!emojiPicker) { // Create if it doesn't exist
            const picker = new EmojiPicker({
                trigger: [
                    {
                        selector: '#emoji-button', // Trigger element ID
                        insertInto: '#new-note textarea', // Text area to insert emoji
                    },

                ],
                closeButton: true,
            });
            picker.render(); // Render the emoji picker


        }


    }

    emojiButton.addEventListener('click', toggleEmojiPicker);



    //Preview Functionality

    const previewButton = document.getElementById('preview-button');
    const previewArea = document.getElementById('preview-area');
    const downloadButton = document.getElementById('download-button');


    previewButton.addEventListener('click', () => {
        const notes = Array.from(document.querySelectorAll('.note')).map(note => note.innerHTML.trim());

        previewArea.innerHTML = ""; // Clear Previous content

        notes.forEach(note => {
            const noteElement = document.createElement('div')
            noteElement.classList.add('note');  //add note class for styling
            noteElement.innerHTML = note;
            previewArea.appendChild(noteElement)


        });
        previewArea.style.display = 'block';

    });

    downloadButton.addEventListener('click', () => {
        const element = document.getElementById('preview-area');

        if(element.innerHTML){
            const opt = {
                margin:       1,
                filename:     'my_notes.pdf',
                image:        { type: 'jpeg', quality: 0.98 },
                html2canvas:  { scale: 2 }, //increase scale for better quality
                jsPDF:        { unit: 'mm', format: 'a4', orientation: 'portrait' }
            };


            // New Promise-based usage:
            html2pdf().from(element).set(opt).save();


        }



    });
</script>

</body>
</html>
